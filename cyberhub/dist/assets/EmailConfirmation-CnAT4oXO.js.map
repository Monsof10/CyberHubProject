{"version":3,"file":"EmailConfirmation-CnAT4oXO.js","sources":["../../src/pages/Auth/EmailConfirmation.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { supabase } from '../../supabase/config';\r\n\r\nconst EmailConfirmation = () => {\r\n  const [status, setStatus] = useState('confirming'); // confirming, success, error\r\n  const [error, setError] = useState('');\r\n  const location = useLocation();\r\n\r\n  useEffect(() => {\r\n    const confirmEmail = async () => {\r\n      try {\r\n        // Parse access_token and refresh_token from URL query parameters or hash\r\n        const params = new URLSearchParams(location.search);\r\n        let access_token = params.get('access_token');\r\n        let refresh_token = params.get('refresh_token');\r\n\r\n        // Sometimes tokens are in URL hash fragment\r\n        if (!access_token || !refresh_token) {\r\n          const hash = location.hash.substring(1); // remove leading #\r\n          const hashParams = new URLSearchParams(hash);\r\n          access_token = hashParams.get('access_token');\r\n          refresh_token = hashParams.get('refresh_token');\r\n        }\r\n\r\n        if (!access_token || !refresh_token) {\r\n          throw new Error('Invalid or missing tokens in confirmation link');\r\n        }\r\n\r\n        // Set the session with the tokens\r\n        const { error: sessionError } = await supabase.auth.setSession({\r\n          access_token,\r\n          refresh_token,\r\n        });\r\n\r\n        if (sessionError) throw sessionError;\r\n\r\n        // Get the user info\r\n        const { data: { user }, error: userError } = await supabase.auth.getUser();\r\n\r\n        if (userError) throw userError;\r\n\r\n        // Check if email is confirmed\r\n        if (user.email_confirmed_at) {\r\n          setStatus('success');\r\n        } else {\r\n          setError('Email not confirmed yet.');\r\n          setStatus('error');\r\n        }\r\n      } catch (error) {\r\n        console.error('Confirmation error:', error);\r\n        setError(error.message || 'Failed to confirm email');\r\n        setStatus('error');\r\n      }\r\n    };\r\n\r\n    confirmEmail();\r\n  }, [location]);\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#FFF1F1', minHeight: '100vh' }}>\r\n      {/* Navigation Bar */}\r\n      <nav style={{\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center',\r\n        padding: '1rem 2rem',\r\n        backgroundColor: '#fff',\r\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '2rem' }}>\r\n          <Link to=\"/\" style={{ fontSize: '1.5rem', fontWeight: 'bold', textDecoration: 'none', color: '#000' }}>\r\n            CyberHub\r\n          </Link>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Confirmation Status */}\r\n      <div style={{\r\n        maxWidth: '400px',\r\n        margin: '4rem auto',\r\n        padding: '2rem',\r\n        backgroundColor: '#fff',\r\n        borderRadius: '8px',\r\n        boxShadow: '0 2px 4px rgba(0,0,0,0.1)',\r\n        textAlign: 'center'\r\n      }}>\r\n        {status === 'confirming' && (\r\n          <>\r\n            <h1 style={{ fontSize: '1.5rem', marginBottom: '1rem' }}>\r\n              Confirming your email...\r\n            </h1>\r\n            <p style={{ color: '#666' }}>\r\n              Please wait while we verify your email address.\r\n            </p>\r\n          </>\r\n        )}\r\n\r\n        {status === 'success' && (\r\n          <>\r\n            <div style={{ marginBottom: '2rem' }}>\r\n              <svg\r\n                width=\"64\"\r\n                height=\"64\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"#10B981\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                style={{ margin: '0 auto' }}\r\n              >\r\n                <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\"></path>\r\n                <polyline points=\"22 4 12 14.01 9 11.01\"></polyline>\r\n              </svg>\r\n            </div>\r\n            <h1 style={{ fontSize: '1.5rem', marginBottom: '1rem', color: '#10B981' }}>\r\n              Email Confirmed!\r\n            </h1>\r\n            <p style={{ color: '#666', marginBottom: '2rem' }}>\r\n              Your email has been successfully confirmed. You can now log in to your account.\r\n            </p>\r\n            <Link\r\n              to=\"/login\"\r\n              style={{\r\n                backgroundColor: '#6B4BFF',\r\n                color: '#fff',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '4px',\r\n                textDecoration: 'none',\r\n                fontWeight: '500',\r\n                display: 'inline-block'\r\n              }}\r\n            >\r\n              Go to Login\r\n            </Link>\r\n          </>\r\n        )}\r\n\r\n        {status === 'error' && (\r\n          <>\r\n            <div style={{ marginBottom: '2rem' }}>\r\n              <svg\r\n                width=\"64\"\r\n                height=\"64\"\r\n                viewBox=\"0 0 24 24\"\r\n                fill=\"none\"\r\n                stroke=\"#DC2626\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                style={{ margin: '0 auto' }}\r\n              >\r\n                <circle cx=\"12\" cy=\"12\" r=\"10\"></circle>\r\n                <line x1=\"15\" y1=\"9\" x2=\"9\" y2=\"15\"></line>\r\n                <line x1=\"9\" y1=\"9\" x2=\"15\" y2=\"15\"></line>\r\n              </svg>\r\n            </div>\r\n            <h1 style={{ fontSize: '1.5rem', marginBottom: '1rem', color: '#DC2626' }}>\r\n              Confirmation Failed\r\n            </h1>\r\n            <p style={{ color: '#666', marginBottom: '1rem' }}>\r\n              {error || 'There was a problem confirming your email.'}\r\n            </p>\r\n            <p style={{ color: '#666', marginBottom: '2rem' }}>\r\n              Please try again or contact support if the problem persists.\r\n            </p>\r\n            <Link\r\n              to=\"/signup\"\r\n              style={{\r\n                backgroundColor: '#6B4BFF',\r\n                color: '#fff',\r\n                padding: '0.75rem 1.5rem',\r\n                borderRadius: '4px',\r\n                textDecoration: 'none',\r\n                fontWeight: '500',\r\n                display: 'inline-block'\r\n              }}\r\n            >\r\n              Back to Sign Up\r\n            </Link>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EmailConfirmation;\r\n"],"names":["EmailConfirmation","status","setStatus","useState","error","setError","location","useLocation","useEffect","params","URLSearchParams","search","access_token","get","refresh_token","hash","substring","hashParams","Error","sessionError","supabase","auth","setSession","data","user","userError","getUser","email_confirmed_at","console","message","jsxs","style","backgroundColor","minHeight","children","jsx","display","justifyContent","alignItems","padding","boxShadow","gap","Link","to","fontSize","fontWeight","textDecoration","color","maxWidth","margin","borderRadius","textAlign","Fragment","marginBottom","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","points","cx","cy","r","x1","y1","x2","y2"],"mappings":"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"}